app.controller("littleAppCtrl",["$scope","$ionicSideMenuDelegate",function(t,e){t.title="小应用",t.state=">",t.toggleLeft=function(){e.toggleLeft(),">"==t.state?t.state="<":t.state=">"}}]),app.controller("oilCtrl",["$rootScope","$scope","$http",function(t,e,o){o.get("--oilprice.php").success(function(t){console.log(t.result),e.b0=t.result[14].b0,e.b90=t.result[14].b90,e.b93=t.result[14].b93,e.b97=t.result[14].b97,e.city=t.result[14].city})}]),app.controller("weatherCtrl",["$rootScope","$scope","$http",function(t,e,o){o.jsonp("http://1.nodeweb.applinzi.com/getWeatherData",{params:{city:"深圳",callback:"JSON_CALLBACK"}}).success(function(t){console.log(t),e.data=t,e.today=t.result.today,e.future=t.result.future,e.sk=t.result.sk,console.log(e.today)})}]);
app.controller("mainCtrl",["$scope","$http",function(n,o){n.test="snoob";new Swiper(".swiper-container",{autoplay:5e3,pagination:".swiper-pagination",autoplayDisableOnInteraction:!1,loop:!0})}]);
app.controller("newCtrl",["$http","$scope","httpServer","timeServer",function(e,t,a,n){t.page=0,t.newId="popular",t.articles=[];var o=a.getNewsType();o.then(function(e){t.newsType=e}),console.log(t.newId),t.click=function(){t.newId=this.newType.id,t.page=0,t.articles=[],console.log(t.newId),t.doRefresh()},t.doRefresh=function(){t.page++,console.log("刷新"+t.page);var e=a.getNews(t.newId,t.page);e.then(function(e){t.articles=e.data.article.concat(t.articles);for(var a=0;a<t.articles.length;a++)t.articles[a].time=n.getDate(t.articles[a].time+"000")}).finally(function(){t.$broadcast("scroll.refreshComplete")})},t.loadMore=function(){t.page++,console.log("刷新"+t.page);var e=a.getNews(t.newId,t.page);e.then(function(e){t.articles=t.articles.concat(e.data.article);for(var a=0;a<t.articles.length;a++)t.articles[a].time=n.getDate(t.articles[a].time+"000")}).finally(function(){t.$broadcast("scroll.infiniteScrollComplete")})},t.moreDataCanBeLoaded=function(){return 10!=t.page}}]);
app.service("httpServer",["$http","$q",function(e,n){return{getNewsType:function(){var r=n.defer();return e.get("json/newlist.json").success(function(e){r.resolve(e)}).success(function(e){r.resolve(e)}).error(function(e){r.reject(e)}),r.promise},getNews:function(r,s){var t=n.defer();return e.jsonp("http://1.snoob.applinzi.com/getNews.php",{params:{newsType:r,count:s,callback:"JSON_CALLBACK"}}).success(function(e){t.resolve(e)}).error(function(e){t.reject(e)}),t.promise}}}]);
app.service("timeServer",[function(){return{getDate:function(e){var t=new Date;return t.setTime(e),t.toLocaleString()}}}]);
app.config(["$stateProvider","$urlRouterProvider",function(t,l){l.when("","/main"),t.state("main",{url:"/main",templateUrl:"html/main.html",controller:"mainCtrl"}).state("new",{url:"/new",templateUrl:"html/new.html",controller:"newCtrl"}).state("littleApp",{url:"/littleApp",templateUrl:"html/littleApp.html",controller:"littleAppCtrl"}).state("littleApp.oil",{url:"/oil",templateUrl:"html/oil.html",controller:"oilCtrl"}).state("littleApp.weather",{url:"/weather",templateUrl:"html/weather.html",controller:"weatherCtrl"})}]);